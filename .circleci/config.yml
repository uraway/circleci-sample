version: 2.1
commands:
  run-tests:
    parameters:
      your-test:
        type: steps
        default: []
    steps:
    - run: mkdir -p ./test-results
    - steps: << parameters.your-test >>
    - store_test_results:
        path: ./test-results

jobs:
  build:
    docker:
      - image: circleci/ruby:latest
    steps:
    - run-tests:
        your-test:
          - run: bundle exec rubocop
          - run: bundle exec rspec
